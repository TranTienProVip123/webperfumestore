<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragments :: head"></head>

<body>
<!-- Navbar -->
<div th:replace="fragments/fragments :: navbar"></div>

<!-- Content -->
<div class="container mt-5">
    <h1>All Orders</h1>
    <div class="table-responsive">
        <table class="table table-dark table-striped">
            <thead>
            <tr>
                <th>Order â„–</th>
                <th>Customer Name</th>
                <th>Shipping Address</th>
                <th>Phone Number</th>
                <th>Email</th>
                <th>Notes</th>
                <th>Payment Method</th>
                <th>Date</th> <!-- New column for date -->
                <th>Product Name</th>
                <th>Price</th>
                <th>Quantity</th>
<!--                <th>Review</th>-->

            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${orders}">
                <td th:text="${order.id}">12345</td>
                <td th:text="${order.customerName}">John Doe</td>
                <td th:text="${order.shippingAddress}">123 Main St</td>
                <td th:text="${order.phoneNumber}">1234567890</td>
                <td th:text="${order.email}">john.doe@example.com</td>
                <td th:text="${order.notes}">Leave at the front door</td>
                <td th:text="${order.paymentMethod}">Credit Card</td>
                <td th:text="${order.orderDateFormatted}">2024-07-20 12:34:56</td> <!-- Display formatted date -->

                <td>
                    <ul>
                        <li th:each="detail : ${order.orderDetails}" th:text="${detail.product.name}"></li>
                    </ul>
                </td>
                <td>
                    <ul>
                        <li th:each="detail : ${order.orderDetails}" th:text="${detail.product.price}"></li>
                    </ul>
                </td>
                <td>
                    <ul>
                        <li th:each="detail : ${order.orderDetails}" th:text="${detail.quantity}"></li>
                    </ul>
                </td>
                <td>
                    <!-- Review Submission Link or Form -->
<!--                    <a th:href="@{/reviews/add(productId=${product.id})}" class="btn btn-primary">Review</a>-->
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Footer -->
<div th:replace="fragments/fragments :: footer"></div>

<!-- Scripts -->
<div th:replace="fragments/fragments :: scripts"></div>
</body>
</html>
